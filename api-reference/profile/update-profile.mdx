# Update Profile

Update the authenticated user's profile information.

## Endpoint

```
PUT /profile
```

## Authentication

This endpoint requires authentication. Include your JWT token in the Authorization header:

```
Authorization: Bearer YOUR_JWT_TOKEN
```

## Request Body

```json
{
  "full_name": "John Smith",
  "phone_number": "+1234567890"
}
```

### Parameters

| Parameter | Type | Required | Description |
|-----------|------|----------|-------------|
| `full_name` | string | No | User's full name |
| `phone_number` | string | No | User's phone number |

## Response

### Success Response (200 OK)

```json
{
  "profile": {
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "email": "john@example.com",
    "full_name": "John Smith",
    "apartment_number": "12A",
    "phone_number": "+1234567890",
    "is_approved": true,
    "is_admin": false,
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T11:45:00Z"
  },
  "user": {
    "id": "123e4567-e89b-12d3-a456-426614174000",
    "email": "john@example.com",
    "email_confirmed_at": "2024-01-15T10:30:00Z",
    "created_at": "2024-01-15T10:30:00Z",
    "updated_at": "2024-01-15T10:30:00Z"
  }
}
```

### Error Responses

#### 400 Bad Request

```json
{
  "error": "Validation failed",
  "details": {
    "full_name": {
      "_errors": ["Full name must be at least 2 characters"]
    },
    "phone_number": {
      "_errors": ["Invalid phone number format"]
    }
  }
}
```

#### 401 Unauthorized

```json
{
  "error": "Authentication required"
}
```

#### 403 Forbidden

```json
{
  "error": "Account not approved"
}
```

## Example

### cURL

```bash
curl -X PUT "https://parking.lapscher.com/api/profile" \
  -H "Authorization: Bearer YOUR_JWT_TOKEN" \
  -H "Content-Type: application/json" \
  -d '{
    "full_name": "John Smith",
    "phone_number": "+1234567890"
  }'
```

### JavaScript

```javascript
const response = await fetch('https://parking.lapscher.com/api/profile', {
  method: 'PUT',
  headers: {
    'Authorization': `Bearer ${token}`,
    'Content-Type': 'application/json'
  },
  body: JSON.stringify({
    full_name: 'John Smith',
    phone_number: '+1234567890'
  })
});

const data = await response.json();
```

### Python

```python
import requests

response = requests.put(
    'https://parking.lapscher.com/api/profile',
    headers={
        'Authorization': f'Bearer {token}',
        'Content-Type': 'application/json'
    },
    json={
        'full_name': 'John Smith',
        'phone_number': '+1234567890'
    }
)

data = response.json()
```

## Notes

- Only the authenticated user can update their own profile
- At least one field must be provided in the request body
- The `updated_at` timestamp is automatically updated
- Phone numbers should be in international format (e.g., +1234567890)
- Full names should be at least 2 characters long
